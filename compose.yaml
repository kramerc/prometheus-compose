services:
  prometheus:
    image: prom/prometheus
    ports:
      - 9090:9090
    volumes:
      - ./prometheus.yml:/etc/prometheus/prometheus.yml
      - prometheus-data:/prometheus
    restart: always
    depends_on:
      - prometheus-jellyfin-exporter
      - prometheus-pve-exporter
      - prometheus-plex-exporter

  prometheus-jellyfin-exporter:
    image: rebelcore/jellyfin-exporter:latest
    env_file: jellyfin.env
    restart: always

  prometheus-pve-exporter:
    image: prompve/prometheus-pve-exporter
    init: true
    volumes:
      - ./pve.yml:/etc/prometheus/pve.yml
    restart: always

  prometheus-plex-exporter:
    image: ghcr.io/jsclayton/prometheus-plex-exporter
    env_file: plex.env
    restart: always

volumes:
  prometheus-data:
